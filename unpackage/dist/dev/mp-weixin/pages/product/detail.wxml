<view class="container"><view class="carousel"><swiper indicator-dots="{{true}}" circular="true" duration="400"><block wx:for="{{product.imgList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><swiper-item class="swiper-item"><view class="image-wrapper"><image class="loaded" src="{{item+'?x-oss-process=style/600px'}}" mode="aspectFill"></image></view></swiper-item></block></swiper></view><view class="introduce-section"><text class="title">{{product.title}}</text><view class="price-box"><text class="price-tip">¥</text><text class="price">{{isVip?(selectedSku.vipPrice?selectedSku.vipPrice:product.vipPrice)/100.0:(selectedSku.price?selectedSku.price:product.price)/100.0}}</text><block wx:if="{{(isVip?selectedSku.vipPrice?selectedSku.vipPrice:product.vipPrice:selectedSku.price?selectedSku.price:product.price)<(selectedSku.price?selectedSku.originalPrice:product.originalPrice)}}"><text class="m-price">{{"¥"+(selectedSku.price?selectedSku.originalPrice:product.originalPrice)/100}}</text></block><block wx:if="{{product.priceTag}}"><text class="coupon-tip">{{product.priceTag}}</text></block><block wx:else><block wx:if="{{(isVip?selectedSku.vipPrice?selectedSku.vipPrice:product.vipPrice:selectedSku.price?selectedSku.price:product.price)<(selectedSku.price?selectedSku.originalPrice:product.originalPrice)}}"><text class="coupon-tip">{{$root.m0/10+"折"}}</text></block></block></view><view class="bot-row"><text>{{"销量: "+product.sales}}</text><text>{{"库存: "+product.stock}}</text></view></view><block wx:if="{{activityType===1}}"><button class="share-section" open-type="share"><view class="share-icon"><text class="yticon icon-xingxing"></text>团</view><text class="tit">{{product.activity.minNum+"人成团，已有"+product.activity.buyerNum+"人参团"}}</text><text class="yticon icon-bangzhu1"></text><view class="share-btn">告诉TA<text class="yticon icon-you"></text></view></button></block><view class="c-list"><view data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">购买类型</text><view class="con"><text class="selected-text">{{''+(selectedSku.title?selectedSku.title:'请选择')+''}}</text></view><text class="yticon icon-you"></text></view><block wx:if="{{couponList.length>0}}"><view data-event-opts="{{[['tap',[['toggleMask',['show']]]]]}}" class="c-row b-b" bindtap="__e"><text class="tit">优惠券</text><text class="con t-r red">领取优惠券</text><text class="yticon icon-you"></text></view></block><view class="c-row b-b"><text class="tit">配送费用</text><block wx:if="{{product.freightTemplate}}"><view class="con-list"><text>{{"单笔购买满¥"+product.freightTemplate.defaultFreePrice/100.0+"元免邮费"}}</text><block wx:if="{{product.freightTemplate.defaultContinueMoney>0}}"><text>{{"每增加"+product.freightTemplate.defaultFirstNum+"件，增加运费¥"+product.freightTemplate.freightTemplateDO.defaultContinueMoney/100.0+"元"}}</text></block><block wx:if="{{product.freightTemplate.carriageDOList.length>0}}"><text>TODO 特殊情况说明页面</text></block></view></block></view><block wx:for="{{product.attributeList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view class="c-row b-b"><text class="tit">{{item.attribute}}</text><view class="bz-list con"><text>{{item.value}}</text></view></view></block></view><block wx:if="{{product.appraisePage&&product.appraisePage.items.length>0}}"><view class="eva-section"><view class="e-header"><text class="tit">评价</text><text>{{"("+product.appraisePage.count+")"}}</text><text data-event-opts="{{[['tap',[['navAppraisePage',['$event']]]]]}}" class="tip" bindtap="__e">全部评论</text><text class="yticon icon-you"></text></view><view class="eva-box"><image class="portrait" src="{{product.appraisePage.items[0].userAvatarUrl?product.appraisePage.items[0].userAvatarUrl:'/static/missing-face.png'}}" mode="aspectFill"></image><view class="right"><text class="name">{{product.appraisePage.items[0].userNickName?product.appraisePage.items[0].userNickName:'用户'+product.appraisePage.items[0].userId}}</text><text class="con">{{product.appraisePage.items[0].content}}</text><view class="bot"><text class="attr">{{"购买类型："+product.appraisePage.items[0].skuTitle}}</text><text class="time">{{product.appraisePage.items[0].gmtCreate}}</text></view></view></view></view></block><view class="detail-desc"><view class="d-header"><text>图文详情</text></view><u-parse vue-id="778f76c8-1" className="rich-img" content="{{product.detail}}" bind:__l="__l"></u-parse></view><view class="page-bottom"><navigator class="p-b-btn" url="/pages/index/index" open-type="switchTab"><text class="yticon icon-xiatubiao--copy"></text><text>首页</text></navigator><navigator class="p-b-btn" url="/pages/cart/cart" open-type="switchTab"><text class="yticon icon-gouwuche"></text><text>购物车</text></navigator><view data-event-opts="{{[['tap',[['likeIt',['$event']]]]]}}" class="{{['p-b-btn',(product.favorite)?'active':'']}}" bindtap="__e"><text class="yticon icon-shoucang"></text><text>收藏</text></view><view class="action-btn-group"><button class=" action-btn no-border buy-now-btn" type="primary" data-event-opts="{{[['tap',[['buy',['$event']]]]]}}" bindtap="__e">{{product.groupShop?'立即参团':'立即购买'}}</button><button class=" action-btn no-border add-cart-btn" type="primary" data-event-opts="{{[['tap',[['addCart',['$event']]]]]}}" bindtap="__e">加入购物车</button></view></view><view data-event-opts="{{[['tap',[['toggleMask',['$event']]]]]}}" class="{{['mask',maskState===0?'none':maskState===1?'show':'']}}" bindtap="__e"><view data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" class="mask-content" catchtap="__e"><block wx:for="{{couponList}}" wx:for-item="item" wx:for-index="index" wx:key="index"><view data-event-opts="{{[['tap',[['obtainCoupon',[index]]]]]}}" class="coupon-item" bindtap="__e"><view class="con"><view class="left"><text class="title">{{item.title}}</text><block wx:if="{{item.gmtEnd}}"><text class="time">{{"在"+item.gmtEnd+"前有效。 可领"+item.limit+"张，已领"+item.nowCount+"张"}}</text></block><block wx:if="{{!item.gmtEnd}}"><text class="time">{{"在领取后"+item.days+"天内有效。可领"+item.limit+"张，已领"+item.nowCount+"张"}}</text></block></view><view class="right"><text class="price">{{item.discount/100.0}}</text><text>{{"满"+item.min/100.0+"可用"}}</text></view><view class="circle l"></view><view class="circle r"></view></view><text class="tips">{{item.categoryTitle?'限'+item.categoryTitle+'可用':'全品类可用'}}</text></view></block></view></view><view data-event-opts="{{[['touchmove',[['stopPrevent',['$event']]]],['tap',[['closeSpec',['$event']]]]]}}" class="{{['popup spec',specClass]}}" catchtouchmove="__e" bindtap="__e"><view class="mask"></view><view class="layer attr-content"><view class="a-t"><block wx:if="{{product.img}}"><image src="{{(selectedSku.img?selectedSku.img:product.img)+'?x-oss-process=style/200px'}}"></image></block><view class="right"><text class="price">{{'¥'+(isVip?selectedSku.vipPrice/100.0:selectedSku.price/100.0)+''}}<block wx:if="{{selectedSku&&selectedSku.priceTag}}"><text class="coupon-tip">{{selectedSku.priceTag}}</text></block></text><text class="stock">{{'库存：'+selectedSku.stock+'件'}}</text><view class="selected">已选：<text>{{''+selectedSku.title+''}}</text></view></view></view><scroll-view style="max-height:70vh;" scroll-y="true" data-event-opts="{{[['tap',[['stopPrevent',['$event']]]]]}}" catchtap="__e"><block wx:for="{{product.specificationList}}" wx:for-item="specItem" wx:for-index="specIndex" wx:key="specIndex"><view class="attr-list"><text>{{specItem.title}}</text><view class="item-list"><block wx:for="{{specItem.values}}" wx:for-item="valueItem" wx:for-index="valueIndex" wx:key="valueIndex"><text data-event-opts="{{[['tap',[['selectSpec',[specIndex,valueIndex]]]]]}}" class="{{['tit',(valueIndex===specItem.selectedIndex)?'selected':'']}}" bindtap="__e">{{''+valueItem+''}}</text></block></view></view></block><text>数量</text><view style="height:70rpx;margin-bottom:100rpx;margin-top:15rpx;position:relative;"><uni-number-box class="step" vue-id="778f76c8-2" min="{{1}}" value="{{buyNum}}" is-min="{{buyNum===1}}" index="{{index}}" data-event-opts="{{[['^eventChange',[['numberChange']]]]}}" bind:eventChange="__e" bind:__l="__l"></uni-number-box></view><button data-event-opts="{{[['tap',[['toggleSpec',['$event']]]]]}}" class="btn" bindtap="__e">完成</button></scroll-view></view></view></view>