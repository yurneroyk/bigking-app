{"version":3,"sources":["uni-app:///main.js","webpack:////Users/yournyk/work/workspaces/product/bigking/unimall/bigking-app/pages/coupon/list.vue?d283","webpack:////Users/yournyk/work/workspaces/product/bigking/unimall/bigking-app/pages/coupon/list.vue?250d","webpack:////Users/yournyk/work/workspaces/product/bigking/unimall/bigking-app/pages/coupon/list.vue?687b","webpack:////Users/yournyk/work/workspaces/product/bigking/unimall/bigking-app/pages/coupon/list.vue?a009","uni-app:///pages/coupon/list.vue","webpack:////Users/yournyk/work/workspaces/product/bigking/unimall/bigking-app/pages/coupon/list.vue?6023","webpack:////Users/yournyk/work/workspaces/product/bigking/unimall/bigking-app/pages/coupon/list.vue?a32e"],"names":["createPage","Page"],"mappings":"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","file":"pages/coupon/list.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/coupon/list.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./list.vue?vue&type=template&id=616a857e&\"\nvar renderjs\nimport script from \"./list.vue?vue&type=script&lang=js&\"\nexport * from \"./list.vue?vue&type=script&lang=js&\"\nimport style0 from \"./list.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/coupon/list.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=template&id=616a857e&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"coupon_box\">\r\n\t\t<view v-if=\"type === 'user'\" class=\"other_type\">\r\n\t\t\t<view class=\"text\"><span>已领取优惠券</span></view>\r\n\t\t</view>\r\n\t\t<coupon v-for=\"(item, index) in couponList\" :key=\"index\" v-bind:item=\"item\" :index=\"index\" @shareCoupon=\"shareCoupon\"\r\n\t\t @obtainCoupon=\"obtainCoupon\" theme=\"#ff0000\"></coupon>\r\n\t\t<view v-if=\"type === 'list' || obatinableCouponList.length > 0\" class=\"other_type\">\r\n\t\t\t<view class=\"text\"><span>可领取</span></view>\r\n\t\t</view>\r\n\t\t<coupon v-for=\"(item, index) in obatinableCouponList\" v-if=\"item.surplus > 0\" :key=\"index\" v-bind:item=\"item\" :index=\"index\" @shareCoupon=\"shareCoupon\"\r\n\t\t @obtainCoupon=\"obtainCoupon\" theme=\"#ff0000\"></coupon>\r\n\t\t<view class=\"hideCanvasView\">\r\n\t\t\t<canvas class=\"hideCanvas\" canvas-id=\"default_PosterCanvasId\" :style=\"{width: (poster.width||0) + 'px', height: (poster.height||0) + 'px'}\"></canvas>\r\n\t\t</view>\r\n\r\n\t\t<!-- 以下是浮层 -->\r\n\t\t<view class=\"flex_row_c_c modalView\" :class=\"qrShow?'show':''\" @tap=\"hideQr()\">\r\n\t\t\t<view class=\"flex_column\">\r\n\t\t\t\t<view class=\"backgroundColor-white padding1vh border_radius_10px\">\r\n\t\t\t\t\t<image :src=\"poster.finalPath\" mode=\"widthFix\" class=\"posterImage\"></image>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"flex_row marginTop2vh\">\r\n\t\t\t\t\t<button class=\"posterBtn\" type=\"primary\" size=\"mini\" @tap.prevent.stop=\"saveImage()\">保存图片</button>\r\n\t\t\t\t\t<button class=\"posterBtn\" type=\"primary\" open-type=\"share\" size=\"mini\">分享好友</button>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t</view>\r\n\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport coupon from '@/components/coolc-coupon/coolc-coupon'\r\n\timport { getSharePoster } from '@/components/QS-SharePoster/QS-SharePoster.js'\r\n\timport _app from '@/components/QS-SharePoster/app.js'\r\n\texport default {\r\n\t\tcomponents: {\r\n\t\t\tcoupon\r\n\t\t},\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\ttitle: '可领取优惠券',\r\n\t\t\t\tcouponList: [],\r\n\t\t\t\tobatinableCouponList: [],\r\n\t\t\t\ttype: 'list',\r\n\t\t\t\tposter: {},\r\n\t\t\t\tqrShow: false,\r\n\t\t\t\tcanvasId: 'default_PosterCanvasId',\r\n\t\t\t\tcouponId: undefined\r\n\t\t\t}\r\n\t\t},\r\n\t\t/**\r\n\t\t * @param {Object} options .type 取值为 list(默认) | user \r\n\t\t * list: 表示从Advert等地方进去的，只显示可领取优惠券\r\n\t\t * user: 表示从我的进去的，显示已领取优惠券\r\n\t\t */\r\n\t\tonLoad(options) {\r\n\t\t\tif (options.type) {\r\n\t\t\t\tthis.type = options.type\r\n\t\t\t} else {\r\n\t\t\t\tthis.type = 'list'\r\n\t\t\t}\r\n\t\t\tthis.loadData()\r\n\t\t},\r\n\t\tonShareAppMessage() {\r\n\t\t\tconst that = this\r\n\t\t\tif (that.couponId) {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: 'Unimall-在线商城',\r\n\t\t\t\t\timageUrl: 'http://shopmalling-asset.oss-cn-hangzhou.aliyuncs.com/coupon_share_bg.jpg',\r\n\t\t\t\t\tpath: '/pages/index/index?couponid=' + that.couponId\r\n\t\t\t\t}\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttitle: 'Unimall-在线商城',\r\n\t\t\t\t\timageUrl: 'http://shopmalling-asset.oss-cn-hangzhou.aliyuncs.com/coupon_share_bg.jpg',\r\n\t\t\t\t\tpath: '/pages/coupon/list'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tasync loadData() {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tif (that.type === 'user') {\r\n\t\t\t\t\tthat.$api.request('coupon', 'getUserCoupons').then(res => {\r\n\t\t\t\t\t\tthat.couponList = res.data\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t\tthat.$api.request('coupon', 'getObtainableCoupon').then(res => {\r\n\t\t\t\t\tthat.obatinableCouponList = res.data\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tobtainCoupon(item, index) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tthat.$api.request('coupon', 'obtainCoupon', {\r\n\t\t\t\t\tcouponId: item.id\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthat.$api.msg('领取成功')\r\n\t\t\t\t\tif (that.type === 'list') {\r\n\t\t\t\t\t\tthat.obatinableCouponList[index].nowCount++\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthat.loadData()\t\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tshareCoupon(item, index) {\r\n\t\t\t\tconst that = this\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '正在获取.'\r\n\t\t\t\t})\r\n\t\t\t\tif (!item.couponId) {\r\n\t\t\t\t\tthat.$api.msg('这个优惠券不能分享')\r\n\t\t\t\t\treturn\r\n\t\t\t\t}\r\n\t\t\t\tthat.$api.request('coupon', 'getCouponQRCodeUrl', {\r\n\t\t\t\t\tcouponId: item.couponId\r\n\t\t\t\t}, failres => {\r\n\t\t\t\t\tuni.hideLoading()\r\n\t\t\t\t\tthat.$api.msg(failres.errmsg)\r\n\t\t\t\t}).then(res => {\r\n\t\t\t\t\tthat.shareFc(res.data)\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tasync shareFc(qrcodeText) {\r\n\t\t\t\ttry {\r\n\t\t\t\t\tconsole.log('准备生成:' + new Date())\r\n\t\t\t\t\tconst d = await getSharePoster({\r\n\t\t\t\t\t\t_this: this, //若在组件中使用 必传\r\n\t\t\t\t\t\ttype: 'testShareType',\r\n\t\t\t\t\t\tformData: {\r\n\t\t\t\t\t\t\t//访问接口获取背景图携带自定义数据\r\n\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tposterCanvasId: this.canvasId, //canvasId\r\n\t\t\t\t\t\tdelayTimeScale: 20, //延时系数\r\n\t\t\t\t\t\t/* background: {\r\n\t\t\t\t\t\t\twidth: 1080,\r\n\t\t\t\t\t\t\theight: 1920,\r\n\t\t\t\t\t\t\tbackgroundColor: '#666'\r\n\t\t\t\t\t\t}, */\r\n\t\t\t\t\t\tdrawArray: ({\r\n\t\t\t\t\t\t\tbgObj,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tbgScale\r\n\t\t\t\t\t\t}) => {\r\n\t\t\t\t\t\t\tconst dx = bgObj.width * 0.3;\r\n\t\t\t\t\t\t\tconst fontSize = bgObj.width * 0.045;\r\n\t\t\t\t\t\t\tconst lineHeight = bgObj.height * 0.04;\r\n\t\t\t\t\t\t\t//可直接return数组，也可以return一个promise对象, 但最终resolve一个数组, 这样就可以方便实现后台可控绘制海报\r\n\t\t\t\t\t\t\treturn new Promise((rs, rj) => {\r\n\t\t\t\t\t\t\t\trs([{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'custom',\r\n\t\t\t\t\t\t\t\t\t\tsetDraw(Context) {\r\n\t\t\t\t\t\t\t\t\t\t\tContext.setFillStyle('black');\r\n\t\t\t\t\t\t\t\t\t\t\tContext.setGlobalAlpha(0.3);\r\n\t\t\t\t\t\t\t\t\t\t\tContext.fillRect(0, bgObj.height - bgObj.height * 0.2, bgObj.width, bgObj.height * 0.2);\r\n\t\t\t\t\t\t\t\t\t\t\tContext.setGlobalAlpha(1);\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'image',\r\n\t\t\t\t\t\t\t\t\t\turl: '/static/logo.jpg',\r\n\t\t\t\t\t\t\t\t\t\talpha: .3,\r\n\t\t\t\t\t\t\t\t\t\tdx,\r\n\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - bgObj.width * 0.25,\r\n\t\t\t\t\t\t\t\t\t\tinfoCallBack(imageInfo) {\r\n\t\t\t\t\t\t\t\t\t\t\tlet scale = bgObj.width * 0.2 / imageInfo.height;\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\tcircleSet: {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tx: imageInfo.width * scale / 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\ty: bgObj.width * 0.2 / 2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tr: bgObj.width * 0.2 / 2\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, // 圆形图片 , 若circleSet与roundRectSet一同设置 优先circleSet设置\r\n\t\t\t\t\t\t\t\t\t\t\t\tdWidth: imageInfo.width * scale, // 因为设置了圆形图片 所以要乘以2\r\n\t\t\t\t\t\t\t\t\t\t\t\tdHeight: bgObj.width * 0.2,\r\n\t\t\t\t\t\t\t\t\t\t\t\t/* roundRectSet: { // 圆角矩形\r\n\t\t\t\t\t\t\t\t\t\t\t\t\tr: imageInfo.width * .1\r\n\t\t\t\t\t\t\t\t\t\t\t\t} */\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\tfontStyle: 'italic',\r\n\t\t\t\t\t\t\t\t\t\ttext: '优惠券',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\talpha: .5,\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\t\t\t\ttextBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tinfoCallBack(textLength) {\r\n\t\t\t\t\t\t\t\t\t\t\t_app.log('index页面的text的infocallback ，textlength:' + textLength);\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdx: bgObj.width - textLength - fontSize,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - lineHeight * 3\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t\tserialNum: 0,\r\n\t\t\t\t\t\t\t\t\t\tid: 'tag1' //自定义标识\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\ttext: '优惠券',\r\n\t\t\t\t\t\t\t\t\t\tfontWeight: 'bold',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\talpha: .75,\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\t\t\t\ttextBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tserialNum: 1,\r\n\t\t\t\t\t\t\t\t\t\tallInfoCallback({ //v3.0.1 更新 可以获取drawArray中全部数据\r\n\t\t\t\t\t\t\t\t\t\t\tdrawArray\r\n\t\t\t\t\t\t\t\t\t\t} = {}) {\r\n\t\t\t\t\t\t\t\t\t\t\tconst obj = drawArray.find(item => item.id === 'tag1');\r\n\t\t\t\t\t\t\t\t\t\t\t/* return {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdx: obj.dx,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: obj.dy + lineHeight\r\n\t\t\t\t\t\t\t\t\t\t\t} */\r\n\t\t\t\t\t\t\t\t\t\t\t//也可以return promise对象\r\n\t\t\t\t\t\t\t\t\t\t\treturn new Promise((rs, rj) => {\r\n\t\t\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\t\t\t\t\t\t\t\trs({\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdx: obj.dx,\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tdy: obj.dy + lineHeight\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t\t\t}, 1);\r\n\t\t\t\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'text',\r\n\t\t\t\t\t\t\t\t\t\ttext: '优惠券',\r\n\t\t\t\t\t\t\t\t\t\tsize: fontSize,\r\n\t\t\t\t\t\t\t\t\t\tcolor: 'white',\r\n\t\t\t\t\t\t\t\t\t\talpha: 1,\r\n\t\t\t\t\t\t\t\t\t\ttextAlign: 'left',\r\n\t\t\t\t\t\t\t\t\t\ttextBaseline: 'middle',\r\n\t\t\t\t\t\t\t\t\t\tinfoCallBack(textLength) {\r\n\t\t\t\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t\t\t\tdx: bgObj.width - textLength - fontSize,\r\n\t\t\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - lineHeight\r\n\t\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\t\t\t{\r\n\t\t\t\t\t\t\t\t\t\ttype: 'qrcode',\r\n\t\t\t\t\t\t\t\t\t\ttext: qrcodeText,\r\n\t\t\t\t\t\t\t\t\t\tsize: bgObj.width * 0.2,\r\n\t\t\t\t\t\t\t\t\t\tdx: bgObj.width * 0.05,\r\n\t\t\t\t\t\t\t\t\t\tdy: bgObj.height - bgObj.width * 0.25\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t]);\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsetCanvasWH: ({\r\n\t\t\t\t\t\t\tbgObj,\r\n\t\t\t\t\t\t\ttype,\r\n\t\t\t\t\t\t\tbgScale\r\n\t\t\t\t\t\t}) => { // 为动态设置画布宽高的方法，\r\n\t\t\t\t\t\t\tthis.poster = bgObj;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\tconsole.log('海报生成成功, 时间:' + new Date() + '， 临时路径: ' + d.poster.tempFilePath)\r\n\t\t\t\t\tthis.poster.finalPath = d.poster.tempFilePath;\r\n\t\t\t\t\tthis.qrShow = true;\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\t_app.hideLoading();\r\n\t\t\t\t\t_app.showToast(JSON.stringify(e));\r\n\t\t\t\t\tconsole.log(JSON.stringify(e));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tsaveImage() {\r\n\t\t\t\t// #ifndef H5\r\n\t\t\t\tuni.saveImageToPhotosAlbum({\r\n\t\t\t\t\tfilePath: this.poster.finalPath,\r\n\t\t\t\t\tsuccess(res) {\r\n\t\t\t\t\t\t_app.showToast('保存成功');\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t\t// #endif\r\n\t\t\t\t// #ifdef H5\r\n\t\t\t\t_app.showToast('保存了');\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\tshare() {\r\n\t\t\t\t// #ifdef APP-PLUS\r\n\t\t\t\t_app.getShare(false, false, 2, '', '', '', this.poster.finalPath, false, false);\r\n\t\t\t\t// #endif\r\n\r\n\t\t\t\t// #ifndef APP-PLUS\r\n\t\t\t\t_app.showToast('分享了');\r\n\t\t\t\t// #endif\r\n\t\t\t},\r\n\t\t\thideQr() {\r\n\t\t\t\tthis.qrShow = false;\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang='scss'>\r\n\tpage {\r\n\t\tbackground: #FFFFFF;\r\n\t}\r\n\r\n\t.coupon_box {\r\n\t\twidth: 100%;\r\n\t\theight: auto;\r\n\t\tdisplay: table;\r\n\t\tpadding: 6upx 26upx 26upx 26upx;\r\n\t}\r\n\r\n\t.other_type {\r\n\t\twidth: 100%;\r\n\t\theight: 90upx;\r\n\t\tpadding-top: 50upx;\r\n\r\n\t\t.text {\r\n\t\t\twidth: 100%;\r\n\t\t\tborder-top: 1px solid #eeeeee;\r\n\t\t\tdisplay: block;\r\n\t\t\ttext-align: center;\r\n\t\t\tposition: relative;\r\n\t\t}\r\n\r\n\t\t.text span {\r\n\t\t\twidth: 180upx;\r\n\t\t\theight: 40upx;\r\n\t\t\tline-height: 40upx;\r\n\t\t\tcolor: #999999;\r\n\t\t\tdisplay: block;\r\n\t\t\tbackground: #ffffff;\r\n\t\t\tposition: absolute;\r\n\t\t\tleft: 50%;\r\n\t\t\ttop: 50%;\r\n\t\t\tmargin-left: -90upx;\r\n\t\t\tmargin-top: -20upx;\r\n\t\t\tfont-size: $font-base;\r\n\t\t}\r\n\t}\r\n\r\n\t.hideCanvasView {\r\n\t\tposition: relative;\r\n\t}\r\n\r\n\t.hideCanvas {\r\n\t\tposition: fixed;\r\n\t\ttop: -99999upx;\r\n\t\tleft: -99999upx;\r\n\t\tz-index: -99999;\r\n\t}\r\n\r\n\t.flex_row_c_c {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t\tjustify-content: center;\r\n\t\talign-items: center;\r\n\t}\r\n\r\n\t.modalView {\r\n\t\twidth: 100%;\r\n\t\theight: 100%;\r\n\t\tposition: fixed;\r\n\t\ttop: 0;\r\n\t\tleft: 0;\r\n\t\tright: 0;\r\n\t\tbottom: 0;\r\n\t\topacity: 0;\r\n\t\toutline: 0;\r\n\t\ttransform: scale(1.2);\r\n\t\tperspective: 2500upx;\r\n\t\tbackground: rgba(0, 0, 0, 0.6);\r\n\t\ttransition: all .3s ease-in-out;\r\n\t\tpointer-events: none;\r\n\t\tbackface-visibility: hidden;\r\n\t\tz-index: 999;\r\n\t}\r\n\r\n\t.modalView.show {\r\n\t\topacity: 1;\r\n\t\ttransform: scale(1);\r\n\t\tpointer-events: auto;\r\n\t}\r\n\r\n\t.flex_column {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\r\n\t.backgroundColor-white {\r\n\t\tbackground-color: white;\r\n\t}\r\n\r\n\t.border_radius_10px {\r\n\t\tborder-radius: 10px;\r\n\t}\r\n\r\n\t.padding1vh {\r\n\t\tpadding: 1vh;\r\n\t}\r\n\r\n\t.posterImage {\r\n\t\twidth: 60vw;\r\n\t}\r\n\r\n\t.flex_row {\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: row;\r\n\t}\r\n\r\n\t.marginTop2vh {\r\n\t\tmargin-top: 2vh;\r\n\t}\r\n\r\n\t.posterBtn {\r\n\t\tbackground: $uni-color-primary;\r\n\t\tcolor: #fff;\r\n\t\tfont-size: $font-lg;\r\n\t}\r\n</style>\r\n","import mod from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../../../Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./list.vue?vue&type=style&index=0&lang=scss&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1626083367734\n      var cssReload = require(\"/Applications/HBuilderX.app/Contents/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}